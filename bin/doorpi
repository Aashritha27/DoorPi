#!/usr/bin/python

import os
import sys
import lockfile
import daemon
from doorpi import DoorPi

ctx = daemon.DaemonContext()

with ctx:
    pid = str(os.getpid())
    file('/var/run/doorpi.pid', 'w').write(pid)
    DP = DoorPi()
    DP.run()
    DP.destroy()
    DP = None
    del DP
    print "db.run"
print "pre ctx.run"
ctx.run()
print "ctx.run"
